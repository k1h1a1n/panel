<div class="greetings-root">
  <header class="greetings-header">
    <button class="back" *ngIf="breadcrumb.length" (click)="goBack()">← Back</button>
    <div class="header-content">
      <h2 class="header-title">{{ title() }}</h2>
      <div class="breadcrumb" *ngIf="breadcrumb.length">{{ breadcrumb.join(' / ') }}</div>
    </div>
  </header>

  <div class="search-box">
    <input type="text" [value]="searchQuery()" (input)="searchQuery.set($any($event.target).value)"
      placeholder="Search categories..." />
  </div>

  <ul class="folder-list folder-grid">
    <li *ngFor="let item of displayList; let i = index" (click)="onItemClick(item)" class="folder-card">
      <div class="card-body" style="letter-spacing: 0.6px;">
        <div class="folder-name">{{ item.name }}</div>
        <div class="folder-code" *ngIf="item.Code">{{ item.Code }}</div>
          <div class="folder-date" *ngIf="item.eventDate && !editingMap[i]">
            {{ formatDate(item.eventDate) }}
            <button class="edit-date-btn" (click)="startEdit(i, item, $event)">Edit</button>
          </div>
          <div class="folder-date-edit" *ngIf="editingMap[i]" (click)="$event.stopPropagation()">
            <input type="date" [value]="editDateMap[i] || item.eventDate" (input)="editDateMap[i] = $any($event.target).value" />
            <button class="save-btn" (click)="saveDate(i, item, $event)">Save</button>
            <button class="cancel-btn" (click)="cancelEdit(i, $event)">Cancel</button>
          </div>
      </div>
      <div class="card-meta">
        <div style="font-size: 11px;">Image Count</div>
        <span class="count-badge" *ngIf="getImageCount(item) > 0">{{ getImageCount(item) }}</span>
        <!-- <div class="chevron">›</div> -->
      </div>
    </li>
  </ul>

  <div *ngIf="displayList.length === 0 && currentList.length > 0" class="empty">No categories match your search</div>
  <div *ngIf="!currentList || currentList.length === 0" class="empty">No categories available</div>
</div>